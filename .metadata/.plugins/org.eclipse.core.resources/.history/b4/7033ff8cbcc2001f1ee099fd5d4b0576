package org.techhub.client;

import java.time.LocalDateTime;
import java.util.*;

import org.techhub.model.ProductModel;
import org.techhub.model.UserModel;
import org.techhub.service.AuthService;
import org.techhub.service.AuthServiceImpl;
import org.techhub.service.ProductService;
import org.techhub.service.ProductServiceImpl;

public class EcommerceCartSystemApp {

	public static void main(String[] args) {
		Scanner sc = new Scanner(System.in);
		ProductService prodService = new ProductServiceImpl();

		AuthService authService = new AuthServiceImpl();
		boolean flag = true;

		do {
			System.out.println("1. Register as admin or normal user(user)\n2. Login as admin or user\n3. Exit");
			System.out.println("Enter your Choice: ");
			int ch = sc.nextInt();

			switch (ch) {
			case 1:
				sc.nextLine();
				System.out.println("Enter Username: ");
				String username = sc.nextLine();
				System.out.println("Enter Email: ");
				String email = sc.nextLine();
				System.out.println("Enter password: ");
				String password = sc.nextLine();
				System.out.println("Register as: 1. Admin 2. Normal User");
				int roleChoice = sc.nextInt();
				LocalDateTime userCreatedAt = LocalDateTime.now();
				String role = (roleChoice == 1) ? "admin" : "normal";

				String result = authService.registerUser(
						new UserModel(0, username, email, password, userCreatedAt, role)) ? "Registration successful!"
								: "Registration failed. Username or email may already exist.";
				System.out.println(result);

				break;
			}
		} while (flag);

	}

}
